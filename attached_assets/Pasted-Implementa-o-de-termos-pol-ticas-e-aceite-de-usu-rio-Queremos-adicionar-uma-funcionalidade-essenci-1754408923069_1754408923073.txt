ImplementaÃ§Ã£o de termos, polÃ­ticas e aceite de usuÃ¡rio
Queremos adicionar uma funcionalidade essencial para garantir boas prÃ¡ticas legais e de consentimento em nosso sistema: o aceite de termos e polÃ­ticas, tanto no cadastro do usuÃ¡rio quanto na finalizaÃ§Ã£o de pedidos.

ğŸ¯ Objetivo
Exibir e registrar o aceite dos termos e polÃ­ticas em:

Tela de cadastro (/register)

Tela de pagamento do evento (/events/:id/payment)

O conteÃºdo das polÃ­ticas deve ser editÃ¡vel via painel do administrador.

O aceite precisa ser registrado em banco de dados, com referÃªncia ao usuÃ¡rio e timestamp.

ğŸ§¾ Estrutura de dados (sugestÃ£o de tabelas)
1. policy_documents
Campo	Tipo	DescriÃ§Ã£o
id	integer	PK
type	enum	"register" ou "order"
title	string	TÃ­tulo (ex: "PolÃ­tica de Privacidade")
content	text	ConteÃºdo em HTML ou markdown
active	boolean	PolÃ­tica ativa?
updated_at	datetime	Ãšltima modificaÃ§Ã£o

Permite que polÃ­ticas sejam diferentes para cadastro e pedidos, e que sejam atualizÃ¡veis.

2. policy_acceptances
Campo	Tipo	DescriÃ§Ã£o
id	integer	PK
user_id	integer	FK para users
policy_id	integer	FK para policy_documents
accepted_at	datetime	Data e hora do aceite
context	string	"register" ou "order" (reforÃ§a a origem)
order_id	integer (nullable)	FK se for aceite em pedido especÃ­fico

ğŸ–¥ï¸ Fluxo nas interfaces do cliente
1. /register (Cadastro)
Adicionar um checkbox obrigatÃ³rio com texto:

â€œLi e aceito os Termos e PolÃ­ticasâ€ (link abre modal)

Ao clicar no link:

Abrir modal com conteÃºdo da polÃ­tica do tipo "register"

SÃ³ permitir o cadastro se o checkbox for marcado

Registrar aceite no banco, referenciando o user_id apÃ³s o cadastro ser concluÃ­do

2. /events/:id/payment (Pagamento do pedido)
Adicionar checkbox obrigatÃ³rio antes de finalizar o pedido:

â€œLi e aceito os Termos do Pedidoâ€ (abre modal)

Modal mostra a polÃ­tica ativa do tipo "order"

SÃ³ permitir concluir o pedido se o checkbox estiver marcado

Salvar aceite no banco com:

user_id

policy_id

order_id do pedido

accepted_at

ğŸ”§ Painel do Administrador
Nova seÃ§Ã£o: "Termos e PolÃ­ticas"
Rota: /admin/policies

Funcionalidades:

Visualizar polÃ­ticas existentes (listagem por tipo)

Criar ou editar polÃ­tica (type: register | order)

Usar editor de texto (HTML ou markdown)

Ativar/desativar uma polÃ­tica

âœ… Boas prÃ¡ticas recomendadas
âœ… PolÃ­tica versÃ£o Ãºnica ativa por tipo â€“ apenas uma polÃ­tica ativa por tipo (register, order) de cada vez.

âœ… ConteÃºdo versionÃ¡vel â€“ manter o histÃ³rico de versÃµes (mesmo que apenas visualmente no admin).

âœ… Modal claro e com rolagem â€“ o texto nÃ£o deve abrir em nova aba, deve ser lido ali mesmo.

âœ… Checkbox obrigatÃ³rio â€“ impede avanÃ§o sem consentimento.

âœ… Salvamento com timestamp â€“ registra o momento do aceite, como exigido por LGPD e boas prÃ¡ticas legais.

âœ… Admin com campo â€œÃºltima modificaÃ§Ã£oâ€ â€“ ajuda a manter rastreabilidade.

âœ… Checklist de implementaÃ§Ã£o
Backend
 Criar tabelas policy_documents e policy_acceptances

 Endpoint para buscar polÃ­tica ativa por tipo (GET /api/policies?type=register)

 Endpoint para registrar aceite

 Validar aceite obrigatÃ³rio antes de cadastrar usuÃ¡rio ou concluir pedido

Frontend â€“ Cliente
 /register: checkbox com link â†’ modal â†’ aceite obrigatÃ³rio

 /events/:id/payment: mesma lÃ³gica de aceite

 Modal com rolagem, exibindo polÃ­tica carregada do backend

Frontend â€“ Admin
 PÃ¡gina /admin/policies com listagem, criaÃ§Ã£o e ediÃ§Ã£o

 Editor de texto (HTML/Markdown)

 Mostrar data da Ãºltima ediÃ§Ã£o

