Atualmente temos um sistema de cupom que funciona muito bem. ele tem como criar cupom para um s√≥ evento. quero adicionar tamb√©m a possibilidade de fazer o cupon funcionar s√≥ em uma zona de cep. ao chegar no checkout tem o cep do cliente no pedido. podemos fazer essa verifica√ß√£o. caso o cupon tenha ativado para zonas especificas. terias um cackbox nas configura√ß√µes do cupon com as zonas de cep para selecionar. lembrando da logica de prioridade de zona de cep. caso o cep se encaixe na zona 1 ele n√£o pode se encaixar na zona 4. pois isso pode acontecer caso a zona 4 seja um intervalo grande
Ajuste no Sistema de Cupom com Zonas de CEP
Atualmente o sistema de cupom permite criar cupons vinculados a um √∫nico evento.
Quero adicionar tamb√©m a possibilidade de um cupom funcionar apenas em zonas de CEP espec√≠ficas.
üìå Regras e Requisitos:
Na tela de configura√ß√£o do cupom, deve existir um checkbox / seletor de zonas de CEP.
O administrador pode marcar uma ou mais zonas ativas (active = true) para restringir o cupom.
Se nenhuma zona for marcada, o cupom funciona normalmente (sem restri√ß√£o de CEP).
O sistema deve verificar em qual zona ativa de prioridade o CEP se encaixa.
A l√≥gica de prioridade funciona assim:
Cada CEP pode se encaixar em mais de uma zona (sobreposi√ß√£o).
A checagem come√ßa sempre pela prioridade mais alta (1 ‚Üí N).
O CEP √© atribu√≠do somente √† primeira zona ativa em que ele se encaixar.
Exemplo: se um CEP pertence √† prioridade 2 e 4, ele √© considerado da prioridade 2, nunca da 4.
Portanto, se o cupom estiver configurado para a zona 4, esse CEP n√£o deve validar o cupom, pois j√° se encaixou na prioridade 2.
Caso o cupom tenha zonas configuradas e o CEP do cliente n√£o perten√ßa a nenhuma delas, o cupom deve ser inv√°lido.
Zonas inativas (active = false) nunca podem ser selecionadas no cupom nem consideradas na valida√ß√£o.
üìå Objetivo do ajuste:
Permitir que cupons sejam restritos por zonas de CEP ativas.
Garantir que a l√≥gica de prioridade seja respeitada (sempre a primeira zona ativa encontrada).

Evitar que cupons de zonas amplas (ex: prioridade 4) se sobreponham a cupons de zonas mais espec√≠ficas (ex: prioridade 1 ou 2).